ğŸ” Retour au [Sommaire](/SOMMAIRE.md)

# 19.2.2. Azure Database for PostgreSQL

## Introduction

**Microsoft Azure** propose plusieurs options pour hÃ©berger PostgreSQL dans le cloud via son service **Azure Database for PostgreSQL**. Contrairement Ã  AWS qui propose deux moteurs distincts (RDS et Aurora), Azure a fait Ã©voluer son offre avec diffÃ©rentes architectures de dÃ©ploiement adaptÃ©es Ã  divers cas d'usage.

Dans cette section, nous allons explorer les diffÃ©rentes offres Azure pour PostgreSQL, comprendre leurs architectures, leurs avantages et comment choisir la solution adaptÃ©e Ã  vos besoins.

---

## Vue d'ensemble de l'Offre Azure PostgreSQL

Microsoft Azure propose **trois options principales** pour PostgreSQL :

1. **Azure Database for PostgreSQL - Single Server** (Legacy - en voie de dÃ©prÃ©ciation)
2. **Azure Database for PostgreSQL - Flexible Server** (RecommandÃ©)
3. **Azure Database for PostgreSQL - Hyperscale (Citus)** (DistribuÃ©)

### Ã‰volution de l'Offre

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Timeline Azure Database for PostgreSQL          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  2017    Single Server lancÃ©                            â”‚
â”‚           â”‚                                             â”‚
â”‚           â–¼                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚           â”‚    Service managÃ© basique                   â”‚
â”‚           â”‚                                             â”‚
â”‚  2021    Flexible Server lancÃ©                          â”‚
â”‚           â”‚           â”‚                                 â”‚
â”‚           â”‚           â–¼                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚           â”‚           â”‚    Architecture amÃ©liorÃ©e       â”‚
â”‚           â”‚           â”‚    + ContrÃ´le + Performance     â”‚
â”‚           â”‚           â”‚                                 â”‚
â”‚  2024    Single Server â†’ DÃ©prÃ©ciÃ©e                      â”‚
â”‚           â”‚           â”‚                                 â”‚
â”‚           â–¼           â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€X           â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚
â”‚       (EOL 2025)      â”‚    Migration vers               â”‚
â”‚                       â”‚    Flexible Server              â”‚
â”‚                       â”‚                                 â”‚
â”‚  Hyperscale (Citus) - En parallÃ¨le pour distributed     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º         â”‚
â”‚           Workloads massivement distribuÃ©s              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Note importante :** Single Server est en fin de vie et sera retirÃ© en **mars 2025**. Microsoft recommande fortement de migrer vers **Flexible Server**.

---

## Azure Database for PostgreSQL - Flexible Server

### Qu'est-ce que Flexible Server ?

**Flexible Server** est l'offre actuelle et recommandÃ©e d'Azure pour PostgreSQL. Elle offre plus de contrÃ´le, de performances et de flexibilitÃ© que l'ancienne version Single Server.

### Architecture de Flexible Server

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Azure Region                          â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Virtual Network (VNet)                 â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚            Subnet PostgreSQL                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  Azure DB for PostgreSQL            â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  Flexible Server                    â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚                                     â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   Instance    â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   PostgreSQL  â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   (Compute)   â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚          â”‚                          â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚          â–¼                          â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   Stockage    â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   Premium SSD â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   (Managed)   â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   (Option Haute DisponibilitÃ©)                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  Standby Replica                    â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  (Zone Redundant ou Same Zone)      â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚                                     â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   RÃ©plication â”‚                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   Synchrone   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”¤ â”‚
â”‚  â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Azure Backup (Sauvegardes automatiques)            â”‚ â”‚
â”‚  â”‚  RÃ©tention : 7-35 jours                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Concepts ClÃ©s Azure

Avant de plonger dans les dÃ©tails, voici quelques concepts Azure importants :

#### Resource Group (Groupe de Ressources)
- **Conteneur logique** pour organiser les ressources Azure
- Permet de gÃ©rer, facturer et sÃ©curiser les ressources ensemble
- Toutes les ressources Azure doivent appartenir Ã  un Resource Group

#### Virtual Network (VNet)
- **RÃ©seau privÃ© virtuel** dans Azure
- Isolation rÃ©seau pour vos ressources
- Ã‰quivalent d'un VPC dans AWS

#### Availability Zone (Zone de DisponibilitÃ©)
- **Datacenter physiquement sÃ©parÃ©** dans une mÃªme rÃ©gion
- Protection contre les pannes de datacenter
- Latence trÃ¨s faible entre zones (< 2ms)

### CaractÃ©ristiques Principales de Flexible Server

#### 1. Versions PostgreSQL SupportÃ©es

Flexible Server supporte les versions majeures suivantes :
- PostgreSQL **11** (support Ã©tendu)
- PostgreSQL **12**
- PostgreSQL **13**
- PostgreSQL **14**
- PostgreSQL **15**
- PostgreSQL **16**
- PostgreSQL **17** (selon disponibilitÃ©)

**Mise Ã  jour :** Flexible Server facilite les mises Ã  jour majeures avec un temps d'arrÃªt minimal.

#### 2. Options de Compute (Calcul)

Flexible Server propose plusieurs niveaux de performance :

##### Burstable (Charges Variables)
- **SÃ©rie B** : B1ms, B2s, B2ms, B4ms, B8ms, B12ms, B16ms, B20ms
- **vCPU** : 1 Ã  20 vCPU
- **RAM** : 2 GB Ã  80 GB
- **Cas d'usage** : DÃ©veloppement, test, charges lÃ©gÃ¨res intermittentes
- **Avantage** : CoÃ»t rÃ©duit, crÃ©dits CPU accumulÃ©s pendant les pÃ©riodes d'inactivitÃ©

##### General Purpose (Usage GÃ©nÃ©ral)
- **SÃ©rie D** : D2s_v3, D4s_v3, D8s_v3, D16s_v3, D32s_v3, D48s_v3, D64s_v3
- **vCPU** : 2 Ã  64 vCPU
- **RAM** : 8 GB Ã  256 GB
- **Cas d'usage** : Production standard, charges Ã©quilibrÃ©es CPU/MÃ©moire
- **Ratio** : 1 vCPU pour 4 GB RAM

##### Memory Optimized (OptimisÃ© MÃ©moire)
- **SÃ©rie E** : E2s_v3, E4s_v3, E8s_v3, E16s_v3, E32s_v3, E48s_v3, E64s_v3
- **vCPU** : 2 Ã  64 vCPU
- **RAM** : 16 GB Ã  432 GB
- **Cas d'usage** : Bases volumineuses, cache important, analytique
- **Ratio** : 1 vCPU pour 8 GB RAM

**Exemple de dimensionnement :**

| Charge | SKU RecommandÃ© | Specs | Prix approximatif |
|--------|----------------|-------|-------------------|
| DÃ©veloppement | B2ms | 2 vCPU, 8 GB | ~60â‚¬/mois |
| Production Petite | D4s_v3 | 4 vCPU, 16 GB | ~250â‚¬/mois |
| Production Moyenne | D8s_v3 | 8 vCPU, 32 GB | ~500â‚¬/mois |
| Production Intensive | E16s_v3 | 16 vCPU, 128 GB | ~1200â‚¬/mois |

#### 3. Stockage

Flexible Server utilise des disques **Azure Premium SSD** :

##### CaractÃ©ristiques du Stockage
- **Taille** : 32 GB Ã  32 TB (extensible)
- **IOPS** : Jusqu'Ã  20 000 IOPS
- **DÃ©bit** : Jusqu'Ã  1 024 MB/s
- **Type** : Premium SSD (P4 Ã  P80)
- **Auto-scaling** : Croissance automatique possible

##### Performance par Taille

| Taille Stockage | IOPS de Base | IOPS Max (Burst) | DÃ©bit |
|-----------------|--------------|------------------|-------|
| 32-128 GB | 500-1100 | 3500 | 125 MB/s |
| 256 GB | 1100 | 3500 | 125 MB/s |
| 512 GB | 2300 | 3500 | 150 MB/s |
| 1 TB | 5000 | 5000 | 200 MB/s |
| 2 TB | 7500 | 7500 | 250 MB/s |
| 4 TB+ | 16000-20000 | - | 900-1024 MB/s |

**Stockage OptimisÃ© IOPS :**
- Permet d'allouer des **IOPS supplÃ©mentaires** indÃ©pendamment de la taille
- Jusqu'Ã  **80 000 IOPS** et **4 000 MB/s** de dÃ©bit
- Utile pour charges I/O intensives sans sur-provisionner le stockage

#### 4. Haute DisponibilitÃ© (HA)

Flexible Server propose deux modes de haute disponibilitÃ© :

##### Zone-Redundant HA (RecommandÃ©)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Azure Region (ex: West Europe)       â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Availability     â”‚      â”‚ Availability     â”‚   â”‚
â”‚  â”‚ Zone 1           â”‚      â”‚ Zone 2           â”‚   â”‚
â”‚  â”‚                  â”‚      â”‚                  â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ Primary  â”‚     â”‚      â”‚ â”‚ Standby  â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ Instance â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â”‚Instance  â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚ Sync â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚      â”‚           â”‚ Repl â”‚      â”‚           â”‚   â”‚
â”‚  â”‚      â–¼           â”‚      â”‚      â–¼           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ Premium  â”‚     â”‚      â”‚ â”‚ Premium  â”‚     â”‚   â”‚
â”‚  â”‚ â”‚   SSD    â”‚     â”‚      â”‚ â”‚   SSD    â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                   â”‚
â”‚  Protection contre : Panne matÃ©riel, Panne Zone   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CaractÃ©ristiques :**
- Instance primaire dans **Zone 1**
- Standby synchrone dans **Zone 2**
- RÃ©plication **synchrone** des donnÃ©es
- **Failover automatique** en 60-120 secondes
- **RPO = 0** (aucune perte de donnÃ©es)
- **RTO < 2 minutes**
- Protection contre les pannes de zone entiÃ¨re

##### Same-Zone HA
- Primaire et standby dans la **mÃªme zone de disponibilitÃ©**
- CoÃ»t lÃ©gÃ¨rement infÃ©rieur
- Protection contre les pannes matÃ©rielles uniquement
- Pas de protection contre panne de zone
- Failover similaire (60-120s)

##### Aucune HA
- Instance **unique** sans rÃ©plication
- CoÃ»t minimal
- **Non recommandÃ© pour production**
- Utilisez uniquement pour dev/test

**Comparaison HA :**

| Aspect | Zone-Redundant | Same-Zone | Aucune HA |
|--------|---------------|-----------|-----------|
| **CoÃ»t** | 2Ã— instance + stockage | 2Ã— instance + stockage | 1Ã— |
| **RPO** | 0 (zÃ©ro perte) | 0 (zÃ©ro perte) | DerniÃ¨re sauvegarde |
| **RTO** | < 2 minutes | < 2 minutes | Temps de restauration |
| **Protection Zone** | âœ… Oui | âŒ Non | âŒ Non |
| **Protection MatÃ©riel** | âœ… Oui | âœ… Oui | âŒ Non |
| **Production** | âœ… RecommandÃ© | âš ï¸ Acceptable | âŒ Non |

#### 5. Read Replicas (RÃ©plicas de Lecture)

Flexible Server supporte jusqu'Ã  **5 Read Replicas** :

##### Fonctionnement
- RÃ©plication **asynchrone** depuis le serveur primaire
- Peut Ãªtre dans la **mÃªme rÃ©gion** ou dans une **autre rÃ©gion** (Geo-Replicas)
- IndÃ©pendant de la configuration HA
- UtilisÃ© pour **scalabilitÃ© en lecture** et **disaster recovery**

##### Cas d'Usage
- **DÃ©charger les lectures** : Rapports, analytics, BI
- **GÃ©o-distribution** : Servir des utilisateurs dans diffÃ©rentes rÃ©gions
- **Disaster Recovery** : RÃ©plica dans une autre rÃ©gion comme backup

##### CaractÃ©ristiques
- Lag de rÃ©plication : Quelques secondes Ã  quelques minutes (asynchrone)
- Promotion possible en serveur indÃ©pendant (pour DR)
- Configuration indÃ©pendante (peut avoir une SKU diffÃ©rente)

**Exemple d'architecture avec Read Replicas :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Region Primaire (West Europe)         â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Primary    â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚ Read Replicaâ”‚                 â”‚
â”‚  â”‚  (HA Zone-  â”‚       â”‚  (Same      â”‚                 â”‚
â”‚  â”‚  Redundant) â”‚       â”‚  Region)    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Geo-Replication
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Region Secondaire (North Europe)           â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Read Replicaâ”‚       â”‚ Read Replicaâ”‚                 â”‚
â”‚  â”‚ (Geo)       â”‚       â”‚ (Geo)       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                        â”‚
â”‚  Cas d'usage : DR, Latence rÃ©duite pour utilisateurs   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6. Sauvegardes et Restauration

##### Sauvegardes Automatiques
- **FrÃ©quence** : Sauvegardes complÃ¨tes + logs de transactions
- **RÃ©tention** : 7 jours (gratuit) Ã  35 jours (payant)
- **Type** : Backup incrÃ©mental basÃ© sur snapshots
- **Stockage** : Stockage gÃ©o-redondant ou localement redondant

##### GÃ©o-Redondance des Backups
- Option de **copier les sauvegardes dans une rÃ©gion jumelÃ©e**
- Protection contre une panne rÃ©gionale complÃ¨te
- Restauration possible dans la rÃ©gion de backup

##### Point-in-Time Restore (PITR)
- Restauration Ã  **n'importe quelle seconde** dans la pÃ©riode de rÃ©tention
- CrÃ©e un **nouveau serveur** (l'original n'est pas modifiÃ©)
- Utile pour rÃ©cupÃ©ration aprÃ¨s erreur humaine

##### Sauvegardes Manuelles
- Via Azure Portal, CLI ou API
- ConservÃ©es indÃ©finiment (jusqu'Ã  suppression manuelle)
- Utile avant migrations majeures

**Processus de Restauration :**
1. Choisir un point de restauration (date/heure exacte)
2. Azure crÃ©e un nouveau serveur avec les donnÃ©es restaurÃ©es
3. VÃ©rifier l'intÃ©gritÃ© des donnÃ©es
4. Basculer l'application vers le nouveau serveur
5. (Optionnel) Supprimer l'ancien serveur

#### 7. Options de RÃ©seau

Flexible Server offre deux modes de connectivitÃ© :

##### Private Access (VNet Integration) - RecommandÃ©
- Le serveur est dÃ©ployÃ© **dans votre VNet**
- AccÃ¨s uniquement depuis le VNet (ou VNets appairÃ©s)
- **Pas d'exposition Internet**
- Utilise un endpoint privÃ© (Private Link)
- SÃ©curitÃ© maximale

**Architecture Private Access :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Virtual Network (VNet)            â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Subnet App (10.0.1.0/24)             â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚   â”‚  Web App â”‚   â”‚  API     â”‚          â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚              â”‚                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                  â”‚ Communication PrivÃ©e     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Subnet PostgreSQL (10.0.2.0/24)      â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚   â”‚ Azure DB for PostgreSQL     â”‚      â”‚ â”‚
â”‚  â”‚   â”‚ (Flexible Server)           â”‚      â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       Aucun accÃ¨s depuis Internet
```

##### Public Access (Firewall Rules)
- Le serveur a une **adresse IP publique**
- AccÃ¨s contrÃ´lÃ© par des rÃ¨gles de pare-feu (whitelist IP)
- Peut autoriser des services Azure spÃ©cifiques
- **Moins sÃ©curisÃ©**, mais plus simple pour dÃ©buter

**RÃ¨gles de Pare-feu :**
```
Exemples de rÃ¨gles :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nom                 | IP DÃ©but    | IP Fin         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Office Network      | 203.0.113.1 | 203.0.113.254  â”‚
â”‚ VPN Gateway         | 198.51.100.5| 198.51.100.5   â”‚
â”‚ Azure Services      | 0.0.0.0     | 0.0.0.0        â”‚
â”‚ Home Developer      | 192.0.2.42  | 192.0.2.42     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Recommandation :** Utilisez **Private Access** pour tout environnement de production. Public Access peut Ãªtre acceptable pour dÃ©veloppement/test avec des rÃ¨gles restrictives.

#### 8. SÃ©curitÃ©

##### Authentification
- **PostgreSQL native** : Utilisateur/mot de passe
- **Azure Active Directory (Entra ID)** : Authentification centralisÃ©e avec AAD
  - Single Sign-On (SSO)
  - Authentification multi-facteurs (MFA)
  - Gestion centralisÃ©e des identitÃ©s
  - RÃ´les Azure RBAC

**Exemple AAD :**
```sql
-- L'utilisateur AAD peut se connecter avec son identitÃ© Azure
-- Pas besoin de mot de passe PostgreSQL sÃ©parÃ©
psql "host=myserver.postgres.database.azure.com \
      user=alice@contoso.com \
      dbname=mydb sslmode=require"
```

##### Chiffrement
- **En transit** : SSL/TLS **obligatoire** par dÃ©faut
  - TLS 1.2 minimum
  - Certificats gÃ©rÃ©s par Azure
- **Au repos** : Chiffrement **automatique** avec Azure Storage Service Encryption
  - ClÃ©s gÃ©rÃ©es par Microsoft (par dÃ©faut)
  - **Customer-Managed Keys (CMK)** : Utiliser Azure Key Vault pour vos propres clÃ©s
  - Chiffrement transparent (pas d'impact performance)

##### RÃ¨gles de SÃ©curitÃ©
- **Network Security Groups (NSG)** : Firewall au niveau subnet
- **Service Endpoints** : Communication sÃ©curisÃ©e entre services Azure
- **Private Link** : Connexion privÃ©e via VNet
- **Azure Firewall** : Protection rÃ©seau centralisÃ©e

##### Auditing et ConformitÃ©
- **Azure Security Center** : Recommandations de sÃ©curitÃ©
- **Azure Policy** : Application de rÃ¨gles de gouvernance
- **Diagnostic Logs** : Exportation vers Log Analytics
- **Compliance** : Certifications ISO, SOC, HIPAA, GDPR

#### 9. ParamÃ¨tres Serveur (Server Parameters)

Flexible Server permet de modifier de nombreux paramÃ¨tres PostgreSQL :

##### CatÃ©gories de ParamÃ¨tres
- **Statiques** : NÃ©cessitent un redÃ©marrage (ex: `shared_buffers`)
- **Dynamiques** : Applicables immÃ©diatement (ex: `work_mem`)

##### ParamÃ¨tres Modifiables Importants
```
Compute et MÃ©moire :
- shared_buffers
- work_mem
- maintenance_work_mem
- effective_cache_size

Connexions :
- max_connections
- idle_in_transaction_session_timeout

Autovacuum :
- autovacuum
- autovacuum_max_workers
- autovacuum_naptime

Performance :
- random_page_cost
- effective_io_concurrency
- checkpoint_timeout

Logging :
- log_statement
- log_duration
- log_min_duration_statement
```

##### ParamÃ¨tres Non Modifiables
Certains paramÃ¨tres sont gÃ©rÃ©s par Azure et non modifiables :
- `port` (toujours 5432)
- `wal_level` (gÃ©rÃ© pour la rÃ©plication)
- `max_wal_senders`
- Configuration liÃ©e au stockage

#### 10. Extensions PostgreSQL

Flexible Server supporte de nombreuses extensions :

##### Extensions PrÃ©installÃ©es
```
Core Extensions :
- pg_stat_statements (monitoring)
- pgcrypto (cryptographie)
- uuid-ossp (gÃ©nÃ©ration UUID)
- citext (texte insensible Ã  la casse)
- hstore (key-value store)
- btree_gin, btree_gist (index)

Analytique :
- tablefunc
- pg_trgm (similaritÃ© texte)
- fuzzystrmatch

Data Types :
- ltree (arbre hiÃ©rarchique)
- cube
- isn
- pgstattuple
```

##### Extensions Populaires Disponibles
- **PostGIS** : DonnÃ©es gÃ©ospatiales
- **TimescaleDB** : SÃ©ries temporelles
- **pgvector** : Vecteurs pour IA/ML
- **pg_partman** : Gestion de partitions
- **pg_cron** : Planification de tÃ¢ches
- **pg_repack** : Maintenance sans verrous

**Installation d'Extension :**
```sql
-- Lister les extensions disponibles
SELECT * FROM pg_available_extensions;

-- Installer une extension
CREATE EXTENSION IF NOT EXISTS pg_stat_statements;
CREATE EXTENSION IF NOT EXISTS postgis;
```

**Note :** Certaines extensions nÃ©cessitent des paramÃ¨tres serveur spÃ©cifiques et un redÃ©marrage.

#### 11. Monitoring et ObservabilitÃ©

##### Azure Monitor Integration
Flexible Server est intÃ©grÃ© nativement avec Azure Monitor :

**MÃ©triques Disponibles :**
- **CPU Utilization** : Pourcentage d'utilisation CPU
- **Memory Usage** : Consommation mÃ©moire
- **Storage Used** : Espace disque utilisÃ©
- **Storage Percent** : Pourcentage d'utilisation
- **IO Consumption** : Utilisation des IOPS
- **Active Connections** : Nombre de connexions
- **Network In/Out** : Trafic rÃ©seau
- **Replication Lag** : DÃ©calage des rÃ©plicas
- **Failed Connections** : Tentatives Ã©chouÃ©es

##### Alertes
CrÃ©ation d'alertes sur n'importe quelle mÃ©trique :
```
Exemples d'alertes critiques :
- CPU > 80% pendant 5 minutes
- Storage > 90%
- Active Connections > 90% de max_connections
- Replication Lag > 60 secondes
- Failed Connections > 100 en 5 minutes
```

##### Diagnostic Logs
Exportation des logs PostgreSQL vers :
- **Log Analytics Workspace** : RequÃªtes KQL avancÃ©es
- **Storage Account** : Archivage long terme
- **Event Hub** : Streaming vers systÃ¨mes tiers

**Types de Logs :**
- **PostgreSQL Logs** : RequÃªtes, erreurs, connexions
- **Query Store** : Historique des requÃªtes et performances
- **Azure Activity Logs** : OpÃ©rations sur la ressource

##### Insights et Analyse
- **Workbooks** : Dashboards personnalisÃ©s
- **Query Performance Insight** : Top requÃªtes lentes
- **Intelligent Performance** : Recommandations automatiques
  - Index manquants
  - RequÃªtes lentes
  - ProblÃ¨mes de paramÃ¨tres

---

## Azure Database for PostgreSQL - Hyperscale (Citus)

### Qu'est-ce que Hyperscale (Citus) ?

**Hyperscale** est une architecture **distribuÃ©e** basÃ©e sur l'extension open-source **Citus** qui transforme PostgreSQL en une base de donnÃ©es **scale-out horizontale**.

### Concept de Sharding Transparent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Application (Connexion unique)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Coordinator Node (Routeur)                â”‚
â”‚  â€¢ ReÃ§oit les requÃªtes                                  â”‚
â”‚  â€¢ Analyse et distribue les requÃªtes                    â”‚
â”‚  â€¢ AgrÃ¨ge les rÃ©sultats                                 â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker 1 â”‚  â”‚ Worker 2 â”‚  â”‚ Worker 3 â”‚  â”‚ Worker N â”‚
â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
â”‚ Shard    â”‚  â”‚ Shard    â”‚  â”‚ Shard    â”‚  â”‚ Shard    â”‚
â”‚ 1-256    â”‚  â”‚ 257-512  â”‚  â”‚ 513-768  â”‚  â”‚ 769-1024 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Chaque Worker stocke une portion des donnÃ©es (shards)
Les requÃªtes sont parallÃ©lisÃ©es automatiquement
```

### Architecture Hyperscale

**Composants :**
1. **Coordinator Node** : Point d'entrÃ©e unique, gÃ¨re le routage
2. **Worker Nodes** : Stockent et traitent les donnÃ©es en parallÃ¨le
3. **Shards** : Partitions distribuÃ©es des tables

### Cas d'Usage de Hyperscale

- âœ… **Multi-tenant SaaS** : Un shard par tenant (isolation)
- âœ… **Real-time Analytics** : RequÃªtes parallÃ¨les sur gros volumes
- âœ… **Time-series Data** : DonnÃ©es chronologiques massives
- âœ… **High-throughput OLTP** : Milliers de transactions/seconde
- âœ… **Data Warehousing** : AgrÃ©gations sur pÃ©taoctets

### Tables DistribuÃ©es vs Tables de RÃ©fÃ©rence

#### Tables DistribuÃ©es
- **PartitionnÃ©es** (sharded) sur les workers
- Choisir une **distribution key** : colonne pour partitionner (ex: `tenant_id`, `user_id`)
- RequÃªtes filtrÃ©es sur la clÃ© = rapides (routage vers un seul worker)
- RequÃªtes sans la clÃ© = scan de tous les workers

```sql
-- CrÃ©er une table distribuÃ©e
SELECT create_distributed_table('events', 'user_id');
```

#### Tables de RÃ©fÃ©rence
- **RÃ©pliquÃ©es** sur tous les workers
- Pour tables petites et utilisÃ©es dans beaucoup de jointures
- Ex: tables de rÃ©fÃ©rence, lookup tables

```sql
-- CrÃ©er une table de rÃ©fÃ©rence
SELECT create_reference_table('countries');
```

### Performances Hyperscale

**Scaling :**
- **Scale-out** : Ajouter des workers (jusqu'Ã  20 workers)
- **Scale-up** : Augmenter la taille des workers
- **Rebalancing** : Redistribution automatique des shards

**Performances typiques :**
- **Millions de lignes/seconde** en ingestion
- **Sous-seconde** pour requÃªtes analytiques sur milliards de lignes
- **ParallÃ©lisation automatique** des requÃªtes

### Limitations Hyperscale

- âŒ **ComplexitÃ© accrue** : Conception diffÃ©rente (choisir bonnes clÃ©s de distribution)
- âŒ **Certaines features limitÃ©es** : Foreign keys entre tables distribuÃ©es
- âŒ **CoÃ»t** : Plus cher (coordinator + multiple workers)
- âŒ **Over-kill** : Pour bases < 100 GB, Flexible Server suffit

### Quand Utiliser Hyperscale ?

- DonnÃ©es **> 100 GB** et croissance continue
- Besoin de **performances extrÃªmes** en lecture et Ã©criture
- Architecture **multi-tenant** avec isolation
- Charge **hautement parallÃ©lisable**

**Sinon, privilÃ©giez Flexible Server.**

---

## Comparaison : Flexible Server vs Hyperscale

| Aspect | Flexible Server | Hyperscale (Citus) |
|--------|----------------|---------------------|
| **Architecture** | Single-node (avec HA optionnel) | Multi-node distribuÃ© |
| **Scaling** | Vertical (compute/storage) | Horizontal (ajout de workers) |
| **CapacitÃ© Max** | 32 TB, 64 vCPU, 432 GB RAM | PÃ©taoctets, 20+ workers |
| **ComplexitÃ©** | Simple | Ã‰levÃ©e |
| **Performances** | TrÃ¨s bonnes | Exceptionnelles (parallÃ¨le) |
| **Cas d'usage** | 90% des applications | Big Data, SaaS multi-tenant |
| **CoÃ»t** | ModÃ©rÃ© | Ã‰levÃ© |
| **CompatibilitÃ© PostgreSQL** | 100% | ~98% (quelques limitations) |

---

## Comparaison Azure vs AWS

### Flexible Server vs RDS PostgreSQL

| Aspect | Azure Flexible Server | AWS RDS PostgreSQL |
|--------|----------------------|---------------------|
| **HA Cross-Zone** | Zone-Redundant HA | Multi-AZ |
| **Failover** | 60-120s | 60-120s |
| **Read Replicas** | 5 max | 5 max |
| **Stockage Max** | 32 TB | 64 TB |
| **IOPS Max** | 80 000 (optimisÃ©) | 256 000 (io2) |
| **RÃ©seau** | VNet Integration | VPC |
| **CoÃ»t** | Similaire | Similaire |
| **Serverless** | âŒ Non | âŒ Non |

### Hyperscale vs Aurora PostgreSQL

| Aspect | Azure Hyperscale | AWS Aurora PostgreSQL |
|--------|-----------------|------------------------|
| **Architecture** | DistribuÃ© (Citus) | Stockage distribuÃ© |
| **Scaling** | Horizontal (workers) | Vertical + 15 replicas |
| **Stockage Max** | PÃ©taoctets | 128 TB |
| **RÃ©plication** | Par shard | Au niveau stockage |
| **Multi-tenant** | âœ… Excellent | âš ï¸ Possible mais non natif |
| **CoÃ»t** | Variable (workers) | 20-30% > RDS |
| **ComplexitÃ©** | Ã‰levÃ©e | Moyenne |
| **Use Case** | DistribuÃ©, multi-tenant | Haute performance gÃ©nÃ©rale |

**RÃ©sumÃ© comparatif :**
- **RDS/Flexible Server** : Similaires, choix dÃ©pend de votre Ã©cosystÃ¨me cloud
- **Aurora** : Meilleur pour performance gÃ©nÃ©rale, stockage distribuÃ© transparent
- **Hyperscale** : Meilleur pour true scale-out, multi-tenant, big data

---

## Migration vers Azure Database for PostgreSQL

### MÃ©thodes de Migration

#### 1. Azure Database Migration Service (DMS)

**Azure DMS** est l'outil recommandÃ© par Microsoft :

##### Fonctionnement
- **Migration en ligne** : RÃ©plication continue avec downtime minimal
- **Migration hors ligne** : Dump & Restore classique
- Supporte migration depuis :
  - PostgreSQL on-premises
  - Autres clouds (AWS RDS, Google Cloud SQL)
  - Azure VMs

##### Processus (Migration en ligne)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Source (PostgreSQL existant)                  â”‚
â”‚    â€¢ Configuration logical replication           â”‚
â”‚    â€¢ CrÃ©ation publication                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Azure DMS                                     â”‚
â”‚    â€¢ Full load initial                           â”‚
â”‚    â€¢ Synchronisation continue (CDC)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Cible (Azure Flexible Server)                 â”‚
â”‚    â€¢ RÃ©plication en continu                      â”‚
â”‚    â€¢ Lag quasi-nul                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Cutover (Basculement)                         â”‚
â”‚    â€¢ ArrÃªt Ã©criture source                       â”‚
â”‚    â€¢ Sync finale                                 â”‚
â”‚    â€¢ Basculement application                     â”‚
â”‚    â€¢ Downtime : Minutes                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### Avantages DMS
- Downtime minimal (quelques minutes)
- Validation automatique
- Interface graphique simple
- Gratuit pour migrations vers Azure

#### 2. pg_dump / pg_restore

Migration classique pour petites/moyennes bases :

```bash
# Export
pg_dump -h source.hostname.com -U username -d dbname \
  -Fc -f backup.dump

# Import vers Azure
pg_restore -h myserver.postgres.database.azure.com \
  -U myadmin -d dbname backup.dump
```

**Avantages :**
- Simple et fiable
- ContrÃ´le total
- Aucune dÃ©pendance externe

**InconvÃ©nients :**
- Downtime complet durant la migration
- Lent pour grosses bases (> 100 GB)

#### 3. Logical Replication Native

Pour migration manuelle fine :

```sql
-- Sur la source
CREATE PUBLICATION my_publication FOR ALL TABLES;

-- Sur Azure Flexible Server (cible)
CREATE SUBSCRIPTION my_subscription
  CONNECTION 'host=source.com dbname=mydb user=repluser'
  PUBLICATION my_publication;
```

### Checklist de Migration

**Avant la migration :**
1. âœ… Audit de compatibilitÃ© (extensions, paramÃ¨tres)
2. âœ… Dimensionnement cible (SKU, stockage, HA)
3. âœ… Configuration rÃ©seau (VNet, firewall)
4. âœ… Tests sur environnement de staging
5. âœ… Sauvegarde complÃ¨te de la source
6. âœ… Plan de rollback dÃ©taillÃ©

**Pendant la migration :**
1. âœ… Monitoring des performances
2. âœ… Validation de l'intÃ©gritÃ© (checksums, counts)
3. âœ… Tests applicatifs

**AprÃ¨s la migration :**
1. âœ… RecrÃ©er les index si nÃ©cessaire
2. âœ… ANALYZE pour mettre Ã  jour les statistiques
3. âœ… Configuration du monitoring Azure
4. âœ… Validation des sauvegardes
5. âœ… Tests de charge

---

## Tarification Azure Database for PostgreSQL

### ModÃ¨le de Tarification Flexible Server

La tarification se dÃ©compose en :

#### 1. Compute (Calcul)
- FacturÃ© Ã  **l'heure**
- Variable selon SKU (Burstable, General Purpose, Memory Optimized)

**Exemples (West Europe) :**
- **B2ms** (2 vCPU, 8 GB) : ~0,083â‚¬/h â‰ˆ **60â‚¬/mois**
- **D4s_v3** (4 vCPU, 16 GB) : ~0,348â‚¬/h â‰ˆ **252â‚¬/mois**
- **E8s_v3** (8 vCPU, 64 GB) : ~0,868â‚¬/h â‰ˆ **628â‚¬/mois**

#### 2. Stockage
- FacturÃ© au **GB/mois**
- Prix : ~0,138â‚¬/GB/mois

**Exemples :**
- 100 GB : ~13,80â‚¬/mois
- 1 TB : ~138â‚¬/mois
- 5 TB : ~690â‚¬/mois

#### 3. IOPS (si optimisÃ©)
- IOPS supplÃ©mentaires : ~0,05â‚¬ par 1000 IOPS/mois
- DÃ©bit supplÃ©mentaire : ~0,10â‚¬ par 100 MB/s/mois

#### 4. Backup
- **Inclus** : Jusqu'Ã  1Ã— la taille du stockage provisionnÃ©
- **Payant** : Au-delÃ , ~0,10â‚¬/GB/mois
- Backup gÃ©o-redondant : SupplÃ©ment de 2Ã—

#### 5. Haute DisponibilitÃ©
- **Zone-Redundant HA** : +100% du coÃ»t compute
- **Same-Zone HA** : +100% du coÃ»t compute

#### 6. Read Replicas
- Chaque rÃ©plica = coÃ»t compute + stockage sÃ©parÃ©
- Transfert donnÃ©es cross-region : ~0,02â‚¬/GB

### Exemple de CoÃ»t Total

**ScÃ©nario Production Moyenne :**
- **Compute** : D8s_v3 (8 vCPU, 32 GB) HA Zone-Redundant
- **Stockage** : 500 GB
- **Backup** : RÃ©tention 14 jours (inclus)
- **RÃ©gion** : West Europe

```
Calcul :
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Compute :        500â‚¬/mois Ã— 2 (HA)  = 1 000â‚¬
Stockage :       0,138â‚¬ Ã— 500 GB     =    69â‚¬
Backup inclus :  500 GB              =     0â‚¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total :                                1 069â‚¬/mois
```

### Optimisation des CoÃ»ts

#### 1. Azure Reserved Instances
- **Engagement 1 an** : -20% Ã  -30%
- **Engagement 3 ans** : -40% Ã  -60%
- Applicable au compute uniquement

#### 2. Dev/Test Pricing
- Tarifs rÃ©duits pour environnements non-production
- NÃ©cessite un abonnement Visual Studio

#### 3. Start/Stop
- **ArrÃªt automatique** : Pour dev/test non utilisÃ©s
- Ne paye que le stockage quand arrÃªtÃ©
- Ã‰conomie : ~80% durant arrÃªt

#### 4. Right-Sizing
- Surveiller les mÃ©triques d'utilisation
- Descendre de SKU si sous-utilisÃ©
- Utiliser Azure Advisor pour recommandations

#### 5. Stockage OptimisÃ©
- Ne provisionner que le nÃ©cessaire
- Auto-growth activÃ© pour Ã©viter le sur-provisionnement
- Nettoyer les donnÃ©es obsolÃ¨tes

---

## Outils et IntÃ©gration

### Azure Portal
- Interface web pour gÃ©rer tous les aspects
- CrÃ©ation, modification, monitoring
- Convivial pour les dÃ©butants

### Azure CLI
```bash
# CrÃ©er un serveur Flexible
az postgres flexible-server create \
  --resource-group myResourceGroup \
  --name myserver \
  --location westeurope \
  --admin-user myadmin \
  --admin-password <password> \
  --sku-name Standard_D4s_v3 \
  --tier GeneralPurpose \
  --storage-size 128 \
  --version 16 \
  --high-availability ZoneRedundant

# Lister les serveurs
az postgres flexible-server list --output table

# ArrÃªter/DÃ©marrer
az postgres flexible-server stop --name myserver --resource-group myResourceGroup
az postgres flexible-server start --name myserver --resource-group myResourceGroup
```

### Azure PowerShell
```powershell
# CrÃ©er un serveur
New-AzPostgreSqlFlexibleServer `
  -ResourceGroupName myResourceGroup `
  -Name myserver `
  -Location westeurope `
  -Sku Standard_D4s_v3
```

### Terraform (Infrastructure as Code)
```hcl
resource "azurerm_postgresql_flexible_server" "example" {
  name                = "myserver"
  resource_group_name = azurerm_resource_group.example.name
  location            = azurerm_resource_group.example.location
  version             = "16"

  administrator_login    = "adminuser"
  administrator_password = var.admin_password

  sku_name   = "GP_Standard_D4s_v3"
  storage_mb = 131072

  high_availability {
    mode = "ZoneRedundant"
  }
}
```

### IntÃ©gration avec Services Azure

#### Azure App Service
- Connexion facile via Connection Strings
- IntÃ©gration VNet pour Private Access
- Managed Identity pour authentification sans mot de passe

#### Azure Functions
- Serverless avec Azure Database for PostgreSQL
- Idle scale-to-zero (la DB reste active)
- Connection pooling nÃ©cessaire (PgBouncer)

#### Azure Kubernetes Service (AKS)
- Connexion via Private Link
- Secrets stockÃ©s dans Azure Key Vault
- Service Mesh pour observabilitÃ©

#### Power BI / Azure Data Factory
- Connecteurs natifs pour analytics et ETL
- DirectQuery ou Import
- Pipelines de donnÃ©es automatisÃ©s

---

## Bonnes Pratiques Azure Database for PostgreSQL

### SÃ©curitÃ©

1. âœ… **Toujours utiliser Private Access (VNet)** pour production
2. âœ… **Activer Azure AD Authentication** pour SSO et MFA
3. âœ… **Customer-Managed Keys** pour chiffrement sensible
4. âœ… **Network Security Groups** restrictifs
5. âœ… **Auditing activÃ©** : Diagnostic Logs vers Log Analytics
6. âœ… **Pas d'administrateur partagÃ©** : CrÃ©er des utilisateurs dÃ©diÃ©s
7. âœ… **Rotation des secrets** via Azure Key Vault

### Performance

1. âœ… **Activer pg_stat_statements** pour monitoring requÃªtes
2. âœ… **Utiliser Query Performance Insight** pour identifier les lenteurs
3. âœ… **Indexation appropriÃ©e** : Analyser les slow queries
4. âœ… **Connection pooling** : PgBouncer ou pooling applicatif
5. âœ… **Right-size les paramÃ¨tres** : shared_buffers, work_mem
6. âœ… **Ã‰viter N+1 queries** : Utiliser JOINs ou batching
7. âœ… **Autovacuum configurÃ©** : Surveiller bloat

### Haute DisponibilitÃ©

1. âœ… **Zone-Redundant HA activÃ©** pour production critique
2. âœ… **Geo-Replicas** pour disaster recovery multi-rÃ©gion
3. âœ… **Automated backups** : RÃ©tention 14-35 jours
4. âœ… **Geo-redundant backups** pour protection rÃ©gionale
5. âœ… **Tests de failover rÃ©guliers** : Valider RTO/RPO
6. âœ… **Monitoring actif** : Alertes sur mÃ©triques critiques
7. âœ… **Runbooks documentÃ©s** : ProcÃ©dures d'urgence

### CoÃ»ts

1. âœ… **Reserved Instances** pour production long terme
2. âœ… **Tagging rigoureux** : Suivi des coÃ»ts par projet
3. âœ… **Azure Cost Management** : Budgets et alertes
4. âœ… **Stop/Start dev/test** : Ã‰conomiser hors horaires
5. âœ… **Azure Advisor** : Recommandations d'optimisation
6. âœ… **Monitorer l'utilisation** : Downsize si sous-utilisÃ©
7. âœ… **Nettoyer donnÃ©es obsolÃ¨tes** : RÃ©duire stockage

### OpÃ©rations

1. âœ… **Infrastructure as Code** : Terraform, ARM, Bicep
2. âœ… **CI/CD pour migrations** : Azure DevOps, GitHub Actions
3. âœ… **Schema versioning** : Flyway, Liquibase
4. âœ… **Monitoring centralisÃ©** : Azure Monitor, Grafana
5. âœ… **Documentation** : Architecture, runbooks, DR plan
6. âœ… **Tests de restauration** : Valider backups mensuellement
7. âœ… **Mises Ã  jour planifiÃ©es** : FenÃªtres de maintenance

---

## Cas d'Usage Typiques

### 1. Application Web Standard
- **SKU** : D4s_v3 (4 vCPU, 16 GB)
- **HA** : Zone-Redundant
- **Stockage** : 256 GB
- **CoÃ»t** : ~600â‚¬/mois
- **Use case** : E-commerce, SaaS, CMS

### 2. Application Multi-Tenant SaaS
- **Architecture** : Hyperscale (Citus)
- **Workers** : 4Ã— D8s_v3
- **Distribution** : Par tenant_id
- **CoÃ»t** : ~3000â‚¬/mois
- **Use case** : SaaS avec milliers de tenants

### 3. Analytique et BI
- **SKU** : E16s_v3 (16 vCPU, 128 GB Memory)
- **Stockage** : 2 TB optimisÃ© IOPS
- **Extensions** : TimescaleDB, pg_stat_statements
- **CoÃ»t** : ~1500â‚¬/mois
- **Use case** : Data warehouse, dashboards temps rÃ©el

### 4. DÃ©veloppement et Tests
- **SKU** : B2ms (2 vCPU, 8 GB Burstable)
- **HA** : Aucune
- **Stockage** : 64 GB
- **Start/Stop** : Automatique hors horaires
- **CoÃ»t** : ~20â‚¬/mois (avec stop)
- **Use case** : Environnements dev/test

---

## Limitations et ConsidÃ©rations

### Limitations Flexible Server

- âŒ **Pas de superuser complet** : Certaines commandes systÃ¨me interdites
- âŒ **Extensions limitÃ©es** : Moins que PostgreSQL natif (mais plus qu'AWS RDS)
- âŒ **max_connections** : LimitÃ© par SKU (102 Ã  5000)
- âŒ **Pas d'accÃ¨s OS** : Pas de SSH, fichiers limitÃ©s
- âŒ **Maintenance imposÃ©e** : FenÃªtres de mise Ã  jour obligatoires

### Limitations Hyperscale

- âŒ **ComplexitÃ© Ã©levÃ©e** : NÃ©cessite expertise Citus
- âŒ **Foreign Keys limitÃ©s** : Uniquement sur distribution key
- âŒ **Certaines features PostgreSQL** : Non supportÃ©es (ex: SERIALIZABLE)
- âŒ **CoÃ»t Ã©levÃ©** : Multiple workers nÃ©cessaires
- âŒ **Over-engineering** : Inutile pour bases < 100 GB

### ConsidÃ©rations GÃ©nÃ©rales

- âš ï¸ **DÃ©pendance Azure** : Vendor lock-in (migration sortante complexe)
- âš ï¸ **RÃ©gions limitÃ©es** : Tous les services ne sont pas partout
- âš ï¸ **CoÃ»ts cachÃ©s** : Transfert donnÃ©es, geo-replication
- âš ï¸ **Compliance** : VÃ©rifier conformitÃ© rÃ©glementaire (GDPR, HDS, etc.)

---

## Conclusion

**Azure Database for PostgreSQL** offre une solution complÃ¨te et flexible pour hÃ©berger PostgreSQL dans le cloud Azure :

### RÃ©sumÃ© Flexible Server

- âœ… **Solution moderne et recommandÃ©e** par Microsoft
- âœ… **Compatible 100%** avec PostgreSQL
- âœ… **Haute disponibilitÃ© robuste** (Zone-Redundant)
- âœ… **Excellente intÃ©gration** avec l'Ã©cosystÃ¨me Azure
- âœ… **CoÃ»t prÃ©visible** et compÃ©titif
- âœ… **SÃ©curitÃ© entreprise** : VNet, AAD, CMK
- âœ… **Monitoring riche** : Azure Monitor natif

### RÃ©sumÃ© Hyperscale (Citus)

- âœ… **Scale-out horizontal** pour big data
- âœ… **Performances exceptionnelles** en parallÃ¨le
- âœ… **Multi-tenant natif** : Isolation par shard
- âœ… **PÃ©taoctets de donnÃ©es** possibles
- âš ï¸ ComplexitÃ© accrue, coÃ»t Ã©levÃ©
- âš ï¸ Uniquement si nÃ©cessaire (> 100 GB, workloads distribuÃ©s)

### Recommandation GÃ©nÃ©rale

**Pour 95% des cas d'usage, Flexible Server est le bon choix :**
- DÃ©ploiement simple
- Performances excellentes
- CoÃ»t maÃ®trisÃ©
- Maintenance rÃ©duite

**Hyperscale uniquement si :**
- DonnÃ©es massives (> 100 GB)
- Architecture multi-tenant nÃ©cessaire
- Performances extrÃªmes requises
- Budget consÃ©quent

### Comparaison avec AWS

- **Azure Flexible Server â‰ˆ AWS RDS** : TrÃ¨s similaires
- **Azure Hyperscale â‰  AWS Aurora** : Approches diffÃ©rentes
  - Hyperscale : True distributed (Citus)
  - Aurora : Stockage distribuÃ©, compute centralisÃ©

**Choix entre Azure et AWS ?**
- DÃ©pend de votre **Ã©cosystÃ¨me cloud** existant
- **CompÃ©tences de l'Ã©quipe**
- **Services complÃ©mentaires** utilisÃ©s (Azure AD, AKS vs EKS, etc.)
- **Pricing** : Faire des simulations prÃ©cises

Azure Database for PostgreSQL s'est considÃ©rablement amÃ©liorÃ© ces derniÃ¨res annÃ©es et est maintenant au niveau d'AWS RDS, voire supÃ©rieur sur certains aspects (intÃ©gration AAD, VNet natif).

---

**Prochaines sections du tutoriel :**
- 19.2.3. Google Cloud SQL et AlloyDB
- 19.2.4. Managed vs Self-Hosted : Trade-offs

â­ï¸ [Google Cloud SQL et AlloyDB](/19-postgresql-en-production/02.3-google-cloud-sql-alloydb.md)
